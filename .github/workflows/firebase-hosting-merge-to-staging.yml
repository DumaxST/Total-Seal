# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Staging Enviroment
on:
  workflow_dispatch:
  repository_dispatch:
    types: [dumax-total-seal-staging-deploy]
  pull_request:
    types: [closed]
    branches:
      - staging
      
permissions:
  contents: read
  checks: write
  pull-requests: write

jobs:
  build_and_deploy_to_staging:
    runs-on: ubuntu-latest
    environment: staging
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2

      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: 20

      - name: Install Dependencies
        run: npm install

      - name: Build
        run: npm run build
        env:
          CI: false
          # API URL: Aqui va el API URL del ambiente correspondiente
          # FIREBASE_CONFIG_FILE: vars.FIREBASE_CONFIG_FILE

      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_DUMAX_TOTAL_SEAL_DEVELOPMENT }}'
          channelId: live
          # target: development
          projectId: dumax-total-seal-development


          